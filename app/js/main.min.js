(function() {
    "use strict";
    var blogListSpace = document.getElementById("blog-list");
    var client = contentful.createClient({
        space: "g0vx54cwozm8",
        accessToken: "35801d84c3a13531e8cfca2d4f644f2d624066a0d59318fbeae5069af335eb01"
    });
    client.getEntries({
        content_type: "blogPost"
    }).then(function(entries) {
        var items = entries.items;
        items.forEach(function(item) {
            var author = item.fields.author.fields.authorName;
            var title = item.fields.title;
            var description = item.fields.description;
            var time = item.fields.dateAndTime;
            var id = item.sys.id;
            var imgUrl = "http://" + item.fields.featureimage.fields.file.url;
            addToBlogList(author, title, time, description, imgUrl, id);
        });
    });
    function addToBlogList(author, title, date, description, imgUrl, entryId) {
        var card = document.createElement("div");
        card.setAttribute("class", "blog-card");
        var form = document.createElement("form");
        form.setAttribute("method", "GET");
        form.setAttribute("action", "blog.html");
        var idField = document.createElement("input");
        idField.setAttribute("type", "hidden");
        idField.setAttribute("name", "id");
        idField.setAttribute("value", entryId);
        var imgField = document.createElement("div");
        var image = document.createElement("img");
        image.src = imgUrl;
        imgField.appendChild(image);
        imgField.setAttribute("class", "blog-featureimg");
        var authorField = createTextDiv("blog-author", author);
        var dateField = createTextDiv("blog-date", date);
        var descField = createTextDiv("blog-desc", description);
        var titleField = document.createElement("input");
        titleField.setAttribute("type", "submit");
        titleField.setAttribute("value", title);
        titleField.setAttribute("class", "blog-title");
        form.appendChild(idField);
        form.appendChild(imgField);
        form.appendChild(titleField);
        form.appendChild(authorField);
        form.appendChild(dateField);
        form.appendChild(descField);
        card.appendChild(form);
        blogListSpace.appendChild(card);
    }
    function createTextDiv(divClass, html) {
        var newDiv = document.createElement("div");
        newDiv.innerHTML = html;
        newDiv.setAttribute("class", divClass);
        return newDiv;
    }
})();

(function() {
    "use strict";
    var client = contentful.createClient({
        space: "g0vx54cwozm8",
        accessToken: "35801d84c3a13531e8cfca2d4f644f2d624066a0d59318fbeae5069af335eb01"
    });
    var params = window.location.search;
    var paramSplit = params.split("=");
    var entryId = paramSplit.length > 1 ? paramSplit[1] : null;
    if (entryId) {
        client.getEntry(entryId).then(function(entry) {
            var title = entry.fields.title;
            var desc = entry.fields.description;
            var time = entry.fields.dateAndTime;
            var content = entry.fields.content;
            var authorId = entry.fields.author.sys.id;
            var imgId = entry.fields.featureimage.sys.id;
            client.getEntry(authorId).then(function(authorData) {
                var name = authorData.fields.authorName;
                var authorDiv = document.getElementById("author");
                authorDiv.innerHTML = name;
            });
            client.getAsset(imgId).then(function(imgData) {
                console.log(imgData);
                var image = document.createElement("IMG");
                image.src = "http:" + imgData.fields.file.url;
                var imgDiv = document.getElementById("image");
                imgDiv.appendChild(image);
            });
            var titleDiv = document.getElementById("title");
            var descDiv = document.getElementById("desc");
            var timeDiv = document.getElementById("time");
            var contentDiv = document.getElementById("post");
            titleDiv.innerHTML = title;
            descDiv.innerHTML = desc;
            timeDiv.innerHTML = time;
            contentDiv.innerHTML = content;
        });
    }
})();

var test = true;

var test = true;

var test = true;

var test = true;

var test2 = false;

var vendor = true;

var test2 = false;

var vendor = true;

var test2 = false;

var vendor = true;

var test2 = false;

var vendor = true;